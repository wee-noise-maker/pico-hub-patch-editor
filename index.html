<HTML>
<head>
	<link rel="stylesheet" type="text/css" href="litegraph.css">
	<link rel="stylesheet" type="text/css" href="litegraph-editor.css">
	<script type="text/javascript" src="litegraph.js"></script>
	<script type="text/javascript" src="litegraph_to_ada.js"></script>
	<script type="text/javascript" src="midi_signal_flow_nodes.js"></script>
</head>
<body style='width:100%; height:100%'>
  <button onclick="graphExportTA()">Export graph</button>
  <button onclick="graphImportTA()">Import graph</button>
  <div class='litegraph'>
    <canvas id='mycanvas' width='2048' height='600' style='border: 1px solid'></canvas>
  </div>
  <textarea id='test-graph-inspect' cols='120' rows='40'>
node=INPUT/test_cable_input:id=7:pos_x=12:pos_y=279:
node=CHANNEL/filter_channel:id=2:pos_x=211:pos_y=417:channel_id=1:passthrough=false:
node=OUTPUT/print_cable:id=3:pos_x=1349:pos_y=114:Name=TRS7:
node=CHANNEL/merge_channel:id=10:pos_x=1033:pos_y=112:Channel_Id=12:
node=UTILS/volca_sample:id=1:pos_x=1032:pos_y=316:
node=OUTPUT/print_cable:id=4:pos_x=1352:pos_y=329:Name=TRS6:
node=CHANNEL/get_note_msg:id=9:pos_x=496:pos_y=72:Note On=true:Note Off=false:Aftertouch=false:Passthrough=false:
node=CHANNEL/filter_channel:id=8:pos_x=210:pos_y=75:channel_id=2:passthrough=false:
node=CHANNEL/keyboard_split:id=5:pos_x=749:pos_y=264:Split Key=60:
link=CABLE_PORT:1=0:4=0:
link=CHANNEL_PORT:2=0:5=1:
link=CHANNEL_PORT:5=1:1=0:
link=CABLE_PORT:7=0:2=1:
link=CABLE_PORT:7=0:8=1:
link=CHANNEL_PORT:8=0:9=0:
link=DATA_PORT:9=0:5=0:
link=CHANNEL_PORT:5=0:10=1:
link=CABLE_PORT:10=0:3=0:
  </textarea>
<script>

var graph = new LGraph();
//     * LGraph is the class that contain a full graph. We instantiate one and add nodes to it, and then we can run the execution loop.
//         * supported callbacks:
//        	+ onNodeAdded: when a new node is added to the graph
//        	+ onNodeRemoved: when a node inside this graph is removed
//        	+ onNodeConnectionChange: some connection has changed in the graph (connected or disconnected)

var canvas = new LGraphCanvas("#mycanvas", graph);

graph.start()

function graphExportTA () {
  const text = graph.toPicoHubConfig();
  document.getElementById("test-graph-inspect").value = text;
}

function graphImportTA () {
  const text = document.getElementById("test-graph-inspect").value;
  graph.loadPicoHubConfig(text);
}

graphImportTA();

</script>
</body>
</html>
